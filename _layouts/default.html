<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
  <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  
  <!-- SEO -->
  {% seo %}
  
  <!-- Styles -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ '/assets/favicon.ico' | relative_url }}">
</head>
<body>
  <div class="layout-container">
    <!-- Sidebar -->
    {% include sidebar.html %}
    
    <!-- Main content -->
    <main class="main-content">
      <div class="content-wrapper">
        {% if page.title and page.url != '/' %}
          <header class="page-header">
            <h1 class="page-title">{{ page.title }}</h1>
            {% if page.description %}
              <p class="page-description">{{ page.description }}</p>
            {% endif %}
          </header>
        {% endif %}
        
        <article class="content">
          {{ content }}
        </article>
        
        <!-- Navigation -->
        <nav class="page-navigation">
          {% assign sorted_nav = site.navigation | sort: 'order' %}
          {% assign current_index = 0 %}
          {% for item in sorted_nav %}
            {% if page.url == item.url %}
              {% assign current_index = forloop.index0 %}
              {% break %}
            {% endif %}
          {% endfor %}
          
          <div class="nav-buttons">
            {% if current_index > 0 %}
              {% assign prev_item = sorted_nav[current_index] | minus: 1 %}
              {% assign prev_page = sorted_nav[current_index - 1] %}
              <a href="{{ prev_page.url | relative_url }}" class="nav-button nav-prev">
                <span class="nav-direction">← Anterior</span>
                <span class="nav-page-title">{{ prev_page.title }}</span>
              </a>
            {% endif %}
            
            {% assign next_index = current_index | plus: 1 %}
            {% if next_index < sorted_nav.size %}
              {% assign next_page = sorted_nav[next_index] %}
              <a href="{{ next_page.url | relative_url }}" class="nav-button nav-next">
                <span class="nav-direction">Próximo →</span>
                <span class="nav-page-title">{{ next_page.title }}</span>
              </a>
            {% endif %}
          </div>
        </nav>
      </div>
    </main>
  </div>
  
  <!-- JavaScript -->
  <script>
    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.getElementById('mobile-menu-toggle');
      const sidebar = document.querySelector('.sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      
      function toggleMenu() {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
        menuToggle.classList.toggle('active');
        document.body.classList.toggle('menu-open');
      }
      
      menuToggle.addEventListener('click', toggleMenu);
      overlay.addEventListener('click', toggleMenu);
      
      // Close menu on escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && sidebar.classList.contains('active')) {
          toggleMenu();
        }
      });
      
      // Close menu when clicking on nav links (mobile)
      const navLinks = document.querySelectorAll('.sidebar .nav-link');
      navLinks.forEach(link => {
        link.addEventListener('click', function() {
          if (window.innerWidth <= 768) {
            toggleMenu();
          }
        });
      });
    });
  </script>
</body>
</html>
